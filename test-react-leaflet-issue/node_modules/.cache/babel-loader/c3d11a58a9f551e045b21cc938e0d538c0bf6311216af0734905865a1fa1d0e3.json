{"ast":null,"code":"var _jsxFileName = \"/Users/emmaholt/Desktop/DataImport2/test-react-leaflet-issue/src/AuthPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, createContext, useCallback, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LOCAL_STORAGE_AUTH_TOKEN_KEY = 'landslide_app_auth_token';\nexport const AuthContext = /*#__PURE__*/createContext(null);\nconst AuthPage = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [user_id, setUser_id] = useState(null);\n  const [token, setToken] = useState(null);\n  const [isLoadingAuth, setIsLoadingAuth] = useState(true);\n  const [authError, setAuthError] = useState('');\n  const [message, setMessage] = useState('');\n  const [inputEmail, setInputEmail] = useState('');\n  const [inputPassword, setInputPassword] = useState('');\n  const [inputUsername, setInputUsername] = useState('');\n  const [showUsernameInput, setShowUsernameInput] = useState(false); // New state to control username input visibility\n\n  const API_BASE_URL = 'http://127.0.0.1:8000';\n  const navigate = useNavigate();\n  const applyAuthData = useCallback((authToken, userData = null) => {\n    setAuthError('');\n    setMessage('');\n    if (authToken && userData) {\n      localStorage.setItem(LOCAL_STORAGE_AUTH_TOKEN_KEY, authToken);\n      setToken(authToken);\n      setUser({\n        email: userData.email,\n        user_id: userData.user_id,\n        username: userData.username\n      });\n      setUser_id(userData.user_id);\n    } else {\n      localStorage.removeItem(LOCAL_STORAGE_AUTH_TOKEN_KEY);\n      setToken(null);\n      setUser(null);\n      setUser_id(null);\n    }\n  }, []);\n  const fetchUserFromToken = useCallback(async authToken => {\n    if (!authToken) {\n      applyAuthData(null);\n      setIsLoadingAuth(false);\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${authToken}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      //I dont think this is nesssacery \n      if (response.ok) {\n        const data = await response.json();\n        if (data && typeof data.user_id === 'string' && typeof data.user_email === 'string') {\n          applyAuthData(authToken, {\n            user_id: data.user_id,\n            email: data.user_email,\n            username: data.username\n          });\n        } else {\n          console.error(\"DEBUG: /users/me response missing expected 'user_id' or 'user_email' or wrong type:\", data);\n          applyAuthData(null);\n        }\n      } else {\n        const errorData = await response.json();\n        console.error(\"DEBUG: /users/me fetch failed. Status:\", response.status, \"Details:\", errorData);\n        applyAuthData(null);\n      }\n    } catch (error) {\n      console.error('DEBUG: Network error during /users/me fetch:', error);\n      applyAuthData(null);\n    } finally {\n      setIsLoadingAuth(false);\n    }\n  }, [API_BASE_URL, applyAuthData]);\n  useEffect(() => {\n    const storedToken = localStorage.getItem(LOCAL_STORAGE_AUTH_TOKEN_KEY);\n    if (storedToken) {\n      fetchUserFromToken(storedToken);\n    } else {\n      setIsLoadingAuth(false);\n    }\n  }, [fetchUserFromToken]);\n  const handleSignInInternal = useCallback(async (email, password) => {\n    setAuthError('');\n    setMessage('');\n    try {\n      const details = new URLSearchParams();\n      details.append('email', email);\n      details.append('password', password);\n      const response = await fetch(`${API_BASE_URL}/token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: details.toString()\n      });\n      if (response.ok) {\n        const data = await response.json();\n        // Apply auth data with user details received from the token endpoint\n        applyAuthData(data.access_token, {\n          user_id: data.user_id,\n          email: data.user_email,\n          username: data.username\n        });\n        setMessage('Logged in successfully!');\n        setInputEmail('');\n        setInputPassword('');\n        setInputUsername(''); // Clear username input after successful login/signup\n        setShowUsernameInput(false); // Hide username input after successful login/signup\n        navigate('/'); // Navigate to home page on success\n        return true;\n      } else {\n        const errorData = await response.json();\n        setAuthError(errorData.detail || 'Invalid email or password.');\n        return false;\n      }\n    } catch (error) {\n      console.error('Sign in network error:', error);\n      setAuthError('Network error. Please try again.');\n      return false;\n    }\n  }, [API_BASE_URL, applyAuthData, navigate]);\n\n  // const handleSignInInternal = useCallback(async (signInEmail, signInPassword, signInUsername) => {\n  //   setAuthError('');\n  //   setMessage('');\n  //   if ((!signInEmail || !signInUsername)|| !signInPassword) {\n  //     setAuthError('Please enter email (or username) and password.');\n  //     return false;\n  //   }\n\n  //   try {\n  //       const details = new URLSearchParams();\n  //       details.append('email', signInEmail);\n  //       details.append('password', signInPassword);\n\n  //       const response = await fetch(`${API_BASE_URL}/token`, {\n  //           method: 'POST',\n  //           headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n  //           body: details.toString(),\n  //       });\n\n  //       if (response.ok) {\n  //           const data = await response.json();\n  //           applyAuthData(data.access_token, { user_id: data.user_id, user_email: data.user_email, username: data.username });\n  //           setMessage('Logged in successfully!');\n  //           setInputEmail('');\n  //           setInputPassword('');\n  //           setInputUsername(''); \n  //           navigate('/');\n  //           return true;\n  //       } else {\n  //           const errorData = await response.json();\n  //           setAuthError(errorData.detail || 'Invalid email or password.'); \n  //           return false;\n  //       }\n  //   } catch (error) {\n  //       console.error('Sign in network error:', error);\n  //       setAuthError('Network error. Please try again.');\n  //       return false;\n  //   }\n  // }, [API_BASE_URL, applyAuthData, navigate]); \n\n  const handleSignUp = useCallback(async () => {\n    setAuthError('');\n    setMessage('');\n    setShowUsernameInput(true); // Show username input when Sign Up is clicked\n\n    if (!inputUsername) {\n      setAuthError('Please choose username');\n      return;\n    }\n    // --- Validation for Sign Up: Email, Password, and Username are all required ---\n    if (!inputEmail || !inputPassword || !inputUsername) {\n      setAuthError('Please enter email, username, and password to sign up.');\n      return;\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: inputUsername,\n          email: inputEmail,\n          password: inputPassword\n        })\n      });\n      if (response.ok) {\n        // If registration is successful, automatically attempt to sign in the user\n        const signInSuccess = await handleSignInInternal(inputEmail, inputPassword);\n        if (signInSuccess) {\n          setMessage('Account created successfully! You are now logged in.');\n        } else {\n          setAuthError('Account created, but automatic login failed. Please sign in manually.');\n        }\n      } else {\n        const errorData = await response.json();\n        console.error(\"DEBUG: Backend error details:\", errorData);\n        let errorMessage = 'An unknown error occurred.';\n        if (errorData.detail) {\n          if (typeof errorData.detail === 'string') {\n            errorMessage = errorData.detail;\n          } else if (Array.isArray(errorData.detail) && errorData.detail.length > 0) {\n            errorMessage = errorData.detail.map(err => `${err.loc.join('.')}: ${err.msg}`).join(', ');\n          } else {\n            errorMessage = JSON.stringify(errorData.detail);\n          }\n        } else if (errorData.message) {\n          errorMessage = errorData.message;\n        }\n        setAuthError(errorMessage || 'Sign up failed.');\n      }\n    } catch (error) {\n      console.error('Sign up network error:', error);\n      setAuthError('Network error. Please try again.');\n    }\n  }, [inputEmail, inputPassword, inputUsername, API_BASE_URL, handleSignInInternal, setAuthError, setMessage]);\n\n  // const handleSignUp = useCallback(async () => {\n  //   setAuthError('');\n  //   setMessage('');\n  //   if (!inputEmail || !inputPassword || !inputUsername) {\n  //     setAuthError('Please enter email, username, and password.');\n  //     return;\n  //   }\n\n  //   try {\n  //       const response = await fetch(`${API_BASE_URL}/register`, {\n  //           method: 'POST',\n  //           headers: { 'Content-Type': 'application/json' },\n  //           body: JSON.stringify({username: inputUsername, email: inputEmail, password: inputPassword }),\n  //       });\n\n  //       if (response.ok) {\n  //           const signInSuccess = await handleSignInInternal(inputEmail, inputPassword, inputUsername); \n  //           if (signInSuccess) {\n  //               setMessage('Account created successfully! You are now logged in.');\n  //           } else {\n  //               setAuthError('Account created, but automatic login failed. Please sign in manually.');\n  //           }\n  //       } else {\n  //           const errorData = await response.json();\n  //           console.error(\"DEBUG: Backend error details:\", errorData);\n\n  //           let errorMessage = 'An unknown error occurred.';\n  //           if (errorData.detail) {\n  //               if (typeof errorData.detail === 'string') {\n  //                   errorMessage = errorData.detail;\n  //               } else if (Array.isArray(errorData.detail) && errorData.detail.length > 0) {\n  //                   errorMessage = errorData.detail.map(err => `${err.loc.join('.')}: ${err.msg}`).join(', ');\n  //               } else {\n  //                   errorMessage = JSON.stringify(errorData.detail);\n  //               }\n  //           } else if (errorData.message) {\n  //               errorMessage = errorData.message;\n  //           }\n\n  //           setAuthError(errorMessage || 'Sign up failed.');\n  //       }\n\n  //   } catch (error) {\n  //       console.error('Sign up network error:', error);\n  //       setAuthError('Network error. Please try again.');\n  //   }\n  // }, [inputEmail, inputPassword, inputUsername, API_BASE_URL, handleSignInInternal, setAuthError, setMessage]); \n\n  const handleSignIn = useCallback(async () => {\n    setAuthError('');\n    setMessage('');\n    // --- Validation for Sign In: Only Email and Password are required ---\n    if (!inputEmail || !inputPassword) {\n      setAuthError('Please enter your email and password to sign in.');\n      return;\n    }\n    // Call the internal sign-in logic with only email and password\n    await handleSignInInternal(inputEmail, inputPassword);\n  }, [inputEmail, inputPassword, handleSignInInternal, setAuthError, setMessage]);\n\n  // const handleSignIn = useCallback(async () => {\n  //   await handleSignInInternal(inputEmail, inputPassword, inputUsername); \n  // }, [inputEmail, inputPassword, inputUsername, handleSignInInternal]); \n\n  const handleSignOut = useCallback(async () => {\n    setAuthError('');\n    setMessage('Logged out successfully.');\n    applyAuthData(null);\n    navigate('/');\n  }, [applyAuthData, navigate]);\n  const authContextValue = useMemo(() => ({\n    user,\n    user_id,\n    token,\n    isLoadingAuth,\n    authError,\n    message,\n    handleSignIn,\n    handleSignUp,\n    handleSignOut\n  }), [user, user_id, token, isLoadingAuth, authError, message, handleSignIn, handleSignUp, handleSignOut]);\n  if (isLoadingAuth) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-loading-box\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"auth-loading-text\",\n          children: \"Loading authentication...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this);\n  }\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: authContextValue,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-page-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-form-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"auth-form-title\",\n            children: \"Landslide Report Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-error-message\",\n            role: \"alert\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"auth-message-strong\",\n              children: \"Error:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"auth-message-span\",\n              children: authError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-info-message\",\n            role: \"alert\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"auth-message-strong\",\n              children: \"Info:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"auth-message-span\",\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auth-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                className: \"auth-label\",\n                children: \"Email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                id: \"user_email\",\n                value: inputEmail,\n                onChange: e => setInputEmail(e.target.value),\n                className: \"auth-input\",\n                placeholder: \"your.email@example.com\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), showUsernameInput && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auth-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"username\",\n                className: \"auth-label\",\n                children: \"Username:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"username\",\n                value: inputUsername,\n                onChange: e => setInputUsername(e.target.value),\n                className: \"auth-input\",\n                placeholder: \"username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auth-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"password\",\n                className: \"auth-label\",\n                children: \"Password:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                id: \"password\",\n                value: inputPassword,\n                onChange: e => setInputPassword(e.target.value),\n                className: \"auth-input\",\n                placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auth-button-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleSignIn,\n                className: \"auth-button auth-button-primary\",\n                children: \"Sign In\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleSignUp,\n                className: \"auth-button auth-button-secondary\",\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: authContextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 430,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthPage, \"hQo9BVGp1r7E2z+3RdCiJEop64c=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthPage;\nexport default AuthPage;\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["React","useState","useEffect","createContext","useCallback","useMemo","useNavigate","jsxDEV","_jsxDEV","LOCAL_STORAGE_AUTH_TOKEN_KEY","AuthContext","AuthPage","children","_s","user","setUser","user_id","setUser_id","token","setToken","isLoadingAuth","setIsLoadingAuth","authError","setAuthError","message","setMessage","inputEmail","setInputEmail","inputPassword","setInputPassword","inputUsername","setInputUsername","showUsernameInput","setShowUsernameInput","API_BASE_URL","navigate","applyAuthData","authToken","userData","localStorage","setItem","email","username","removeItem","fetchUserFromToken","response","fetch","method","headers","ok","data","json","user_email","console","error","errorData","status","storedToken","getItem","handleSignInInternal","password","details","URLSearchParams","append","body","toString","access_token","detail","handleSignUp","JSON","stringify","signInSuccess","errorMessage","Array","isArray","length","map","err","loc","join","msg","handleSignIn","handleSignOut","authContextValue","className","fileName","_jsxFileName","lineNumber","columnNumber","Provider","value","role","htmlFor","type","id","onChange","e","target","placeholder","onClick","_c","$RefreshReg$"],"sources":["/Users/emmaholt/Desktop/DataImport2/test-react-leaflet-issue/src/AuthPage.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useCallback, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom'; \n\nconst LOCAL_STORAGE_AUTH_TOKEN_KEY = 'landslide_app_auth_token';\n\nexport const AuthContext = createContext(null);\n\nconst AuthPage = ({ children }) => {\n  const [user, setUser] = useState(null); \n  const [user_id, setUser_id] = useState(null);\n  const [token, setToken] = useState(null); \n\n  const [isLoadingAuth, setIsLoadingAuth] = useState(true); \n\n  const [authError, setAuthError] = useState('');\n  const [message, setMessage] = useState('');\n\n  const [inputEmail, setInputEmail] = useState('');\n  const [inputPassword, setInputPassword] = useState('');\n  const [inputUsername, setInputUsername] = useState('');\n\n    const [showUsernameInput, setShowUsernameInput] = useState(false); // New state to control username input visibility\n\n\n  const API_BASE_URL = 'http://127.0.0.1:8000'; \n\n  const navigate = useNavigate();\n\n  const applyAuthData = useCallback((authToken, userData = null) => {\n      setAuthError(''); \n      setMessage('');   \n\n      if (authToken && userData) {\n          localStorage.setItem(LOCAL_STORAGE_AUTH_TOKEN_KEY, authToken);\n          setToken(authToken);\n          setUser({ email: userData.email, user_id: userData.user_id, username: userData.username });\n          setUser_id(userData.user_id);\n      } else {\n          localStorage.removeItem(LOCAL_STORAGE_AUTH_TOKEN_KEY);\n          setToken(null);\n          setUser(null);\n          setUser_id(null); \n      }\n  }, []); \n\n  const fetchUserFromToken = useCallback(async (authToken) => {\n      if (!authToken) {\n          applyAuthData(null); \n          setIsLoadingAuth(false);\n          return;\n      }\n\n      try {\n          const response = await fetch(`${API_BASE_URL}/users/me`, {\n              method: 'GET',\n              headers: {\n                  'Authorization': `Bearer ${authToken}`, \n                  'Content-Type': 'application/json',\n              },\n          });\n          //I dont think this is nesssacery \n           if (response.ok) {\n                const data = await response.json();\n                if (data && typeof data.user_id === 'string' && typeof data.user_email === 'string') {\n                    applyAuthData(authToken, { user_id: data.user_id, email: data.user_email, username: data.username });\n                } else {\n                    console.error(\"DEBUG: /users/me response missing expected 'user_id' or 'user_email' or wrong type:\", data);\n                    applyAuthData(null);\n                }\n            }\n            else {\n              const errorData = await response.json();\n              console.error(\"DEBUG: /users/me fetch failed. Status:\", response.status, \"Details:\", errorData);\n              applyAuthData(null); \n          }\n      } catch (error) {\n          console.error('DEBUG: Network error during /users/me fetch:', error);\n          applyAuthData(null); \n      } finally {\n          setIsLoadingAuth(false); \n      }\n  }, [API_BASE_URL, applyAuthData]); \n\n  useEffect(() => {\n    const storedToken = localStorage.getItem(LOCAL_STORAGE_AUTH_TOKEN_KEY);\n    \n    if (storedToken) {\n        fetchUserFromToken(storedToken);\n    } else {\n        setIsLoadingAuth(false);\n    }\n  }, [fetchUserFromToken]); \n\n    const handleSignInInternal = useCallback(async (email, password) => {\n    setAuthError('');\n    setMessage('');\n\n    try {\n        const details = new URLSearchParams();\n        details.append('email', email);\n        details.append('password', password);\n\n        const response = await fetch(`${API_BASE_URL}/token`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n            body: details.toString(),\n        });\n\n        if (response.ok) {\n            const data = await response.json();\n            // Apply auth data with user details received from the token endpoint\n            applyAuthData(data.access_token, { user_id: data.user_id, email: data.user_email, username: data.username });\n            setMessage('Logged in successfully!');\n            setInputEmail('');\n            setInputPassword('');\n            setInputUsername(''); // Clear username input after successful login/signup\n            setShowUsernameInput(false); // Hide username input after successful login/signup\n            navigate('/'); // Navigate to home page on success\n            return true;\n        } else {\n            const errorData = await response.json();\n            setAuthError(errorData.detail || 'Invalid email or password.');\n            return false;\n        }\n    } catch (error) {\n        console.error('Sign in network error:', error);\n        setAuthError('Network error. Please try again.');\n        return false;\n    }\n  }, [API_BASE_URL, applyAuthData, navigate]);\n\n  // const handleSignInInternal = useCallback(async (signInEmail, signInPassword, signInUsername) => {\n  //   setAuthError('');\n  //   setMessage('');\n  //   if ((!signInEmail || !signInUsername)|| !signInPassword) {\n  //     setAuthError('Please enter email (or username) and password.');\n  //     return false;\n  //   }\n\n  //   try {\n  //       const details = new URLSearchParams();\n  //       details.append('email', signInEmail);\n  //       details.append('password', signInPassword);\n\n  //       const response = await fetch(`${API_BASE_URL}/token`, {\n  //           method: 'POST',\n  //           headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n  //           body: details.toString(),\n  //       });\n\n  //       if (response.ok) {\n  //           const data = await response.json();\n  //           applyAuthData(data.access_token, { user_id: data.user_id, user_email: data.user_email, username: data.username });\n  //           setMessage('Logged in successfully!');\n  //           setInputEmail('');\n  //           setInputPassword('');\n  //           setInputUsername(''); \n  //           navigate('/');\n  //           return true;\n  //       } else {\n  //           const errorData = await response.json();\n  //           setAuthError(errorData.detail || 'Invalid email or password.'); \n  //           return false;\n  //       }\n  //   } catch (error) {\n  //       console.error('Sign in network error:', error);\n  //       setAuthError('Network error. Please try again.');\n  //       return false;\n  //   }\n  // }, [API_BASE_URL, applyAuthData, navigate]); \n\n\nconst handleSignUp = useCallback(async () => {\n    setAuthError('');\n    setMessage('');\n    setShowUsernameInput(true); // Show username input when Sign Up is clicked\n\n    if(!inputUsername) {\n      setAuthError('Please choose username');\n      return;\n    }\n    // --- Validation for Sign Up: Email, Password, and Username are all required ---\n    if (!inputEmail || !inputPassword || !inputUsername) {\n      setAuthError('Please enter email, username, and password to sign up.');\n      return;\n    }\n\n    try {\n        const response = await fetch(`${API_BASE_URL}/register`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({username: inputUsername, email: inputEmail, password: inputPassword }),\n        });\n\n        if (response.ok) {\n            // If registration is successful, automatically attempt to sign in the user\n            const signInSuccess = await handleSignInInternal(inputEmail, inputPassword);\n            if (signInSuccess) {\n                setMessage('Account created successfully! You are now logged in.');\n            } else {\n                setAuthError('Account created, but automatic login failed. Please sign in manually.');\n            }\n        } else {\n            const errorData = await response.json();\n            console.error(\"DEBUG: Backend error details:\", errorData);\n\n            let errorMessage = 'An unknown error occurred.';\n            if (errorData.detail) {\n                if (typeof errorData.detail === 'string') {\n                    errorMessage = errorData.detail;\n                } else if (Array.isArray(errorData.detail) && errorData.detail.length > 0) {\n                    errorMessage = errorData.detail.map(err => `${err.loc.join('.')}: ${err.msg}`).join(', ');\n                } else {\n                    errorMessage = JSON.stringify(errorData.detail);\n                }\n            } else if (errorData.message) {\n                errorMessage = errorData.message;\n            }\n\n            setAuthError(errorMessage || 'Sign up failed.');\n        }\n\n    } catch (error) {\n        console.error('Sign up network error:', error);\n        setAuthError('Network error. Please try again.');\n    }\n  }, [inputEmail, inputPassword, inputUsername, API_BASE_URL, handleSignInInternal, setAuthError, setMessage]);\n\n\n  // const handleSignUp = useCallback(async () => {\n  //   setAuthError('');\n  //   setMessage('');\n  //   if (!inputEmail || !inputPassword || !inputUsername) {\n  //     setAuthError('Please enter email, username, and password.');\n  //     return;\n  //   }\n\n  //   try {\n  //       const response = await fetch(`${API_BASE_URL}/register`, {\n  //           method: 'POST',\n  //           headers: { 'Content-Type': 'application/json' },\n  //           body: JSON.stringify({username: inputUsername, email: inputEmail, password: inputPassword }),\n  //       });\n\n  //       if (response.ok) {\n  //           const signInSuccess = await handleSignInInternal(inputEmail, inputPassword, inputUsername); \n  //           if (signInSuccess) {\n  //               setMessage('Account created successfully! You are now logged in.');\n  //           } else {\n  //               setAuthError('Account created, but automatic login failed. Please sign in manually.');\n  //           }\n  //       } else {\n  //           const errorData = await response.json();\n  //           console.error(\"DEBUG: Backend error details:\", errorData);\n\n  //           let errorMessage = 'An unknown error occurred.';\n  //           if (errorData.detail) {\n  //               if (typeof errorData.detail === 'string') {\n  //                   errorMessage = errorData.detail;\n  //               } else if (Array.isArray(errorData.detail) && errorData.detail.length > 0) {\n  //                   errorMessage = errorData.detail.map(err => `${err.loc.join('.')}: ${err.msg}`).join(', ');\n  //               } else {\n  //                   errorMessage = JSON.stringify(errorData.detail);\n  //               }\n  //           } else if (errorData.message) {\n  //               errorMessage = errorData.message;\n  //           }\n\n  //           setAuthError(errorMessage || 'Sign up failed.');\n  //       }\n\n  //   } catch (error) {\n  //       console.error('Sign up network error:', error);\n  //       setAuthError('Network error. Please try again.');\n  //   }\n  // }, [inputEmail, inputPassword, inputUsername, API_BASE_URL, handleSignInInternal, setAuthError, setMessage]); \n\n\n  const handleSignIn = useCallback(async () => {\n    setAuthError('');\n    setMessage('');\n    // --- Validation for Sign In: Only Email and Password are required ---\n    if (!inputEmail || !inputPassword) {\n        setAuthError('Please enter your email and password to sign in.');\n        return;\n    }\n    // Call the internal sign-in logic with only email and password\n    await handleSignInInternal(inputEmail, inputPassword);\n  }, [inputEmail, inputPassword, handleSignInInternal, setAuthError, setMessage]);\n\n\n  // const handleSignIn = useCallback(async () => {\n  //   await handleSignInInternal(inputEmail, inputPassword, inputUsername); \n  // }, [inputEmail, inputPassword, inputUsername, handleSignInInternal]); \n\n  const handleSignOut = useCallback(async () => { \n    setAuthError('');\n    setMessage('Logged out successfully.');\n    applyAuthData(null); \n    navigate('/'); \n  }, [applyAuthData, navigate]); \n\n  const authContextValue = useMemo(() => ({\n    user,\n    user_id, \n    token,  \n    isLoadingAuth, \n    authError,\n    message,\n    handleSignIn,\n    handleSignUp,\n    handleSignOut,\n  }), [user, user_id, token, isLoadingAuth, authError, message, handleSignIn, handleSignUp, handleSignOut]);\n\n\n  if (isLoadingAuth) {\n    return (\n      <div className=\"auth-loading-container\">\n        <div className=\"auth-loading-box\">\n          <p className=\"auth-loading-text\">Loading authentication...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!token) { \n    return (\n      <AuthContext.Provider value={authContextValue}>\n        <div className=\"auth-page-container\">\n          <div className=\"auth-form-card\">\n            <h2 className=\"auth-form-title\">\n              Landslide Report Login\n            </h2>\n\n            {authError && (\n              <div className=\"auth-error-message\" role=\"alert\">\n                <strong className=\"auth-message-strong\">Error:</strong>\n                <span className=\"auth-message-span\">{authError}</span>\n              </div>\n            )}\n\n            {message && (\n              <div className=\"auth-info-message\" role=\"alert\">\n                <strong className=\"auth-message-strong\">Info:</strong>\n                <span className=\"auth-message-span\">{message}</span>\n              </div>\n            )}\n            \n            <div>\n              <div className=\"auth-input-group\">\n                <label htmlFor=\"email\" className=\"auth-label\">\n                  Email:\n                </label>\n                <input\n                  type=\"email\" \n                  id=\"user_email\"\n                  value={inputEmail} \n                  onChange={(e) => setInputEmail(e.target.value)} \n                  className=\"auth-input\"\n                  placeholder=\"your.email@example.com\"\n                />\n              </div>\n\n               {showUsernameInput && (\n                <div className=\"auth-input-group\">\n                  <label htmlFor=\"username\" className=\"auth-label\">\n                    Username:\n                  </label>\n                  <input\n                  type=\"text\"\n                  id=\"username\"\n                  value={inputUsername}\n                  onChange={(e) => setInputUsername(e.target.value)}\n                  className=\"auth-input\"\n                  placeholder=\"username\"\n                  />\n                </div>\n              )}\n\n              {/* <div className=\"auth-input-group\">\n                <label htmlFor=\"username\" className=\"auth-label\">\n                  Username:\n                </label>\n                <input\n                type=\"username\"\n                id=\"username\"\n                value={inputUsername}\n                onChange={(e) => setInputUsername(e.target.value)}\n                className=\"auth-input\"\n                placeholder=\"username\"\n                />\n              </div> */}\n\n              <div className=\"auth-input-group\">\n                <label htmlFor=\"password\" className=\"auth-label\">\n                  Password:\n                </label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  value={inputPassword} \n                  onChange={(e) => setInputPassword(e.target.value)} \n                  className=\"auth-input\"\n                  placeholder=\"••••••••\"\n                />\n              </div>\n\n              <div className=\"auth-button-group\">\n                <button\n                  onClick={handleSignIn} \n                  className=\"auth-button auth-button-primary\"\n                >\n                  Sign In\n                </button>\n                <button\n                  onClick={handleSignUp} \n                  className=\"auth-button auth-button-secondary\"\n                >\n                  Sign Up\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </AuthContext.Provider>\n    );\n  }\n\n  return (\n    <AuthContext.Provider value={authContextValue}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthPage;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}